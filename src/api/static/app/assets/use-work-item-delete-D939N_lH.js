import{c as Z,u as T,d as Te,a as I,f as Ne,B as Ot}from"./button-r2jIDO2w.js";import{u as we}from"./useQuery-Euy325s0.js";import{a as Me}from"./api-client-CDvRtWmo.js";import{r as s,j as r}from"./index-DumVsrUo.js";import{P as N,c as h,a as ce,u as je,d as _e,e as Ft,f as $t,b as Lt}from"./index-C1JUgJ-4.js";import{u as ve,e as ke,a as Oe,R as Gt,A as Kt,P as Ut,c as Fe,h as Bt,f as zt,g as Vt,F as Yt,D as Wt,C as qt,b as Ht}from"./index-0mpa9FNi.js";import{P as ie}from"./scroll-area-B_tK9JRv.js";import{R as Xt,W as Qt,C as Zt,T as Jt,g as eo,h as $e,i as Le,e as to,O as oo,j as no}from"./dialog-D49-HonL.js";const ro=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],Dr=Z("grip-vertical",ro);const ao=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Rr=Z("layers",ao);const so=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],br=Z("pencil",so);const co=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Er=Z("target",co);const io=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Ir=Z("trash-2",io),P={all:["work-items"],lists:()=>[...P.all,"list"],list:e=>[...P.lists(),e],details:()=>[...P.all,"detail"],detail:e=>[...P.details(),e],tree:()=>[...P.all,"tree"]};function Ar(e){return we({queryKey:P.list(e),queryFn:({signal:o})=>Me.get("/api/work-items",{signal:o})})}function Sr(e){return we({queryKey:P.detail(e),queryFn:({signal:t})=>Me.get(`/api/work-items/${e}`,{signal:t}),enabled:!!e})}function Pr(){return we({queryKey:P.tree(),queryFn:({signal:e})=>Me.get("/api/work-items/tree",{signal:e})})}var ge="rovingFocusGroup.onEntryFocus",uo={bubbles:!1,cancelable:!0},J="RovingFocusGroup",[he,Ge,lo]=ke(J),[fo,Ke]=ce(J,[lo]),[po,mo]=fo(J),Ue=s.forwardRef((e,t)=>r.jsx(he.Provider,{scope:e.__scopeRovingFocusGroup,children:r.jsx(he.Slot,{scope:e.__scopeRovingFocusGroup,children:r.jsx(go,{...e,ref:t})})}));Ue.displayName=J;var go=s.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:o,orientation:n,loop:a=!1,dir:c,currentTabStopId:i,defaultCurrentTabStopId:d,onCurrentTabStopIdChange:m,onEntryFocus:f,preventScrollOnEntryFocus:u=!1,...l}=e,v=s.useRef(null),w=T(t,v),p=je(c),[x,M]=Oe({prop:i,defaultProp:d??null,onChange:m,caller:J}),[_,B]=s.useState(!1),D=_e(f),E=Ge(o),z=s.useRef(!1),[oe,j]=s.useState(0);return s.useEffect(()=>{const C=v.current;if(C)return C.addEventListener(ge,D),()=>C.removeEventListener(ge,D)},[D]),r.jsx(po,{scope:o,orientation:n,dir:p,loop:a,currentTabStopId:x,onItemFocus:s.useCallback(C=>M(C),[M]),onItemShiftTab:s.useCallback(()=>B(!0),[]),onFocusableItemAdd:s.useCallback(()=>j(C=>C+1),[]),onFocusableItemRemove:s.useCallback(()=>j(C=>C-1),[]),children:r.jsx(N.div,{tabIndex:_||oe===0?-1:0,"data-orientation":n,...l,ref:w,style:{outline:"none",...e.style},onMouseDown:h(e.onMouseDown,()=>{z.current=!0}),onFocus:h(e.onFocus,C=>{const L=!z.current;if(C.target===C.currentTarget&&L&&!_){const k=new CustomEvent(ge,uo);if(C.currentTarget.dispatchEvent(k),!k.defaultPrevented){const V=E().filter(A=>A.focusable),Y=V.find(A=>A.active),ne=V.find(A=>A.id===x),fe=[Y,ne,...V].filter(Boolean).map(A=>A.ref.current);Ve(fe,u)}}z.current=!1}),onBlur:h(e.onBlur,()=>B(!1))})})}),Be="RovingFocusGroupItem",ze=s.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:o,focusable:n=!0,active:a=!1,tabStopId:c,children:i,...d}=e,m=ve(),f=c||m,u=mo(Be,o),l=u.currentTabStopId===f,v=Ge(o),{onFocusableItemAdd:w,onFocusableItemRemove:p,currentTabStopId:x}=u;return s.useEffect(()=>{if(n)return w(),()=>p()},[n,w,p]),r.jsx(he.ItemSlot,{scope:o,id:f,focusable:n,active:a,children:r.jsx(N.span,{tabIndex:l?0:-1,"data-orientation":u.orientation,...d,ref:t,onMouseDown:h(e.onMouseDown,M=>{n?u.onItemFocus(f):M.preventDefault()}),onFocus:h(e.onFocus,()=>u.onItemFocus(f)),onKeyDown:h(e.onKeyDown,M=>{if(M.key==="Tab"&&M.shiftKey){u.onItemShiftTab();return}if(M.target!==M.currentTarget)return;const _=xo(M,u.orientation,u.dir);if(_!==void 0){if(M.metaKey||M.ctrlKey||M.altKey||M.shiftKey)return;M.preventDefault();let D=v().filter(E=>E.focusable).map(E=>E.ref.current);if(_==="last")D.reverse();else if(_==="prev"||_==="next"){_==="prev"&&D.reverse();const E=D.indexOf(M.currentTarget);D=u.loop?wo(D,E+1):D.slice(E+1)}setTimeout(()=>Ve(D))}}),children:typeof i=="function"?i({isCurrentTabStop:l,hasTabStop:x!=null}):i})})});ze.displayName=Be;var vo={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function ho(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function xo(e,t,o){const n=ho(e.key,o);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return vo[n]}function Ve(e,t=!1){const o=document.activeElement;for(const n of e)if(n===o||(n.focus({preventScroll:t}),document.activeElement!==o))return}function wo(e,t){return e.map((o,n)=>e[(t+n)%e.length])}var Mo=Ue,_o=ze,xe=["Enter"," "],Co=["ArrowDown","PageUp","Home"],Ye=["ArrowUp","PageDown","End"],yo=[...Co,...Ye],Do={ltr:[...xe,"ArrowRight"],rtl:[...xe,"ArrowLeft"]},Ro={ltr:["ArrowLeft"],rtl:["ArrowRight"]},ee="Menu",[X,bo,Eo]=ke(ee),[F,We]=ce(ee,[Eo,Fe,Ke]),ue=Fe(),qe=Ke(),[Io,$]=F(ee),[Ao,te]=F(ee),He=e=>{const{__scopeMenu:t,open:o=!1,children:n,dir:a,onOpenChange:c,modal:i=!0}=e,d=ue(t),[m,f]=s.useState(null),u=s.useRef(!1),l=_e(c),v=je(a);return s.useEffect(()=>{const w=()=>{u.current=!0,document.addEventListener("pointerdown",p,{capture:!0,once:!0}),document.addEventListener("pointermove",p,{capture:!0,once:!0})},p=()=>u.current=!1;return document.addEventListener("keydown",w,{capture:!0}),()=>{document.removeEventListener("keydown",w,{capture:!0}),document.removeEventListener("pointerdown",p,{capture:!0}),document.removeEventListener("pointermove",p,{capture:!0})}},[]),r.jsx(Gt,{...d,children:r.jsx(Io,{scope:t,open:o,onOpenChange:l,content:m,onContentChange:f,children:r.jsx(Ao,{scope:t,onClose:s.useCallback(()=>l(!1),[l]),isUsingKeyboardRef:u,dir:v,modal:i,children:n})})})};He.displayName=ee;var So="MenuAnchor",Ce=s.forwardRef((e,t)=>{const{__scopeMenu:o,...n}=e,a=ue(o);return r.jsx(Kt,{...a,...n,ref:t})});Ce.displayName=So;var ye="MenuPortal",[Po,Xe]=F(ye,{forceMount:void 0}),Qe=e=>{const{__scopeMenu:t,forceMount:o,children:n,container:a}=e,c=$(ye,t);return r.jsx(Po,{scope:t,forceMount:o,children:r.jsx(ie,{present:o||c.open,children:r.jsx(Ut,{asChild:!0,container:a,children:n})})})};Qe.displayName=ye;var b="MenuContent",[To,De]=F(b),Ze=s.forwardRef((e,t)=>{const o=Xe(b,e.__scopeMenu),{forceMount:n=o.forceMount,...a}=e,c=$(b,e.__scopeMenu),i=te(b,e.__scopeMenu);return r.jsx(X.Provider,{scope:e.__scopeMenu,children:r.jsx(ie,{present:n||c.open,children:r.jsx(X.Slot,{scope:e.__scopeMenu,children:i.modal?r.jsx(No,{...a,ref:t}):r.jsx(jo,{...a,ref:t})})})})}),No=s.forwardRef((e,t)=>{const o=$(b,e.__scopeMenu),n=s.useRef(null),a=T(t,n);return s.useEffect(()=>{const c=n.current;if(c)return Bt(c)},[]),r.jsx(Re,{...e,ref:a,trapFocus:o.open,disableOutsidePointerEvents:o.open,disableOutsideScroll:!0,onFocusOutside:h(e.onFocusOutside,c=>c.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>o.onOpenChange(!1)})}),jo=s.forwardRef((e,t)=>{const o=$(b,e.__scopeMenu);return r.jsx(Re,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>o.onOpenChange(!1)})}),ko=$t("MenuContent.ScrollLock"),Re=s.forwardRef((e,t)=>{const{__scopeMenu:o,loop:n=!1,trapFocus:a,onOpenAutoFocus:c,onCloseAutoFocus:i,disableOutsidePointerEvents:d,onEntryFocus:m,onEscapeKeyDown:f,onPointerDownOutside:u,onFocusOutside:l,onInteractOutside:v,onDismiss:w,disableOutsideScroll:p,...x}=e,M=$(b,o),_=te(b,o),B=ue(o),D=qe(o),E=bo(o),[z,oe]=s.useState(null),j=s.useRef(null),C=T(t,j,M.onContentChange),L=s.useRef(0),k=s.useRef(""),V=s.useRef(0),Y=s.useRef(null),ne=s.useRef("right"),re=s.useRef(0),fe=p?Vt:s.Fragment,A=p?{as:ko,allowPinchZoom:!0}:void 0,kt=g=>{const K=k.current+g,O=E().filter(R=>!R.disabled),W=document.activeElement,pe=O.find(R=>R.ref.current===W)?.textValue,me=O.map(R=>R.textValue),Ae=Wo(me,K,pe),q=O.find(R=>R.textValue===Ae)?.ref.current;(function R(Se){k.current=Se,window.clearTimeout(L.current),Se!==""&&(L.current=window.setTimeout(()=>R(""),1e3))})(K),q&&setTimeout(()=>q.focus())};s.useEffect(()=>()=>window.clearTimeout(L.current),[]),zt();const G=s.useCallback(g=>ne.current===Y.current?.side&&Ho(g,Y.current?.area),[]);return r.jsx(To,{scope:o,searchRef:k,onItemEnter:s.useCallback(g=>{G(g)&&g.preventDefault()},[G]),onItemLeave:s.useCallback(g=>{G(g)||(j.current?.focus(),oe(null))},[G]),onTriggerLeave:s.useCallback(g=>{G(g)&&g.preventDefault()},[G]),pointerGraceTimerRef:V,onPointerGraceIntentChange:s.useCallback(g=>{Y.current=g},[]),children:r.jsx(fe,{...A,children:r.jsx(Yt,{asChild:!0,trapped:a,onMountAutoFocus:h(c,g=>{g.preventDefault(),j.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:r.jsx(Wt,{asChild:!0,disableOutsidePointerEvents:d,onEscapeKeyDown:f,onPointerDownOutside:u,onFocusOutside:l,onInteractOutside:v,onDismiss:w,children:r.jsx(Mo,{asChild:!0,...D,dir:_.dir,orientation:"vertical",loop:n,currentTabStopId:z,onCurrentTabStopIdChange:oe,onEntryFocus:h(m,g=>{_.isUsingKeyboardRef.current||g.preventDefault()}),preventScrollOnEntryFocus:!0,children:r.jsx(qt,{role:"menu","aria-orientation":"vertical","data-state":mt(M.open),"data-radix-menu-content":"",dir:_.dir,...B,...x,ref:C,style:{outline:"none",...x.style},onKeyDown:h(x.onKeyDown,g=>{const O=g.target.closest("[data-radix-menu-content]")===g.currentTarget,W=g.ctrlKey||g.altKey||g.metaKey,pe=g.key.length===1;O&&(g.key==="Tab"&&g.preventDefault(),!W&&pe&&kt(g.key));const me=j.current;if(g.target!==me||!yo.includes(g.key))return;g.preventDefault();const q=E().filter(R=>!R.disabled).map(R=>R.ref.current);Ye.includes(g.key)&&q.reverse(),Vo(q)}),onBlur:h(e.onBlur,g=>{g.currentTarget.contains(g.target)||(window.clearTimeout(L.current),k.current="")}),onPointerMove:h(e.onPointerMove,Q(g=>{const K=g.target,O=re.current!==g.clientX;if(g.currentTarget.contains(K)&&O){const W=g.clientX>re.current?"right":"left";ne.current=W,re.current=g.clientX}}))})})})})})})});Ze.displayName=b;var Oo="MenuGroup",be=s.forwardRef((e,t)=>{const{__scopeMenu:o,...n}=e;return r.jsx(N.div,{role:"group",...n,ref:t})});be.displayName=Oo;var Fo="MenuLabel",Je=s.forwardRef((e,t)=>{const{__scopeMenu:o,...n}=e;return r.jsx(N.div,{...n,ref:t})});Je.displayName=Fo;var ae="MenuItem",Pe="menu.itemSelect",le=s.forwardRef((e,t)=>{const{disabled:o=!1,onSelect:n,...a}=e,c=s.useRef(null),i=te(ae,e.__scopeMenu),d=De(ae,e.__scopeMenu),m=T(t,c),f=s.useRef(!1),u=()=>{const l=c.current;if(!o&&l){const v=new CustomEvent(Pe,{bubbles:!0,cancelable:!0});l.addEventListener(Pe,w=>n?.(w),{once:!0}),Ft(l,v),v.defaultPrevented?f.current=!1:i.onClose()}};return r.jsx(et,{...a,ref:m,disabled:o,onClick:h(e.onClick,u),onPointerDown:l=>{e.onPointerDown?.(l),f.current=!0},onPointerUp:h(e.onPointerUp,l=>{f.current||l.currentTarget?.click()}),onKeyDown:h(e.onKeyDown,l=>{const v=d.searchRef.current!=="";o||v&&l.key===" "||xe.includes(l.key)&&(l.currentTarget.click(),l.preventDefault())})})});le.displayName=ae;var et=s.forwardRef((e,t)=>{const{__scopeMenu:o,disabled:n=!1,textValue:a,...c}=e,i=De(ae,o),d=qe(o),m=s.useRef(null),f=T(t,m),[u,l]=s.useState(!1),[v,w]=s.useState("");return s.useEffect(()=>{const p=m.current;p&&w((p.textContent??"").trim())},[c.children]),r.jsx(X.ItemSlot,{scope:o,disabled:n,textValue:a??v,children:r.jsx(_o,{asChild:!0,...d,focusable:!n,children:r.jsx(N.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...c,ref:f,onPointerMove:h(e.onPointerMove,Q(p=>{n?i.onItemLeave(p):(i.onItemEnter(p),p.defaultPrevented||p.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:h(e.onPointerLeave,Q(p=>i.onItemLeave(p))),onFocus:h(e.onFocus,()=>l(!0)),onBlur:h(e.onBlur,()=>l(!1))})})})}),$o="MenuCheckboxItem",tt=s.forwardRef((e,t)=>{const{checked:o=!1,onCheckedChange:n,...a}=e;return r.jsx(st,{scope:e.__scopeMenu,checked:o,children:r.jsx(le,{role:"menuitemcheckbox","aria-checked":se(o)?"mixed":o,...a,ref:t,"data-state":Ie(o),onSelect:h(a.onSelect,()=>n?.(se(o)?!0:!o),{checkForDefaultPrevented:!1})})})});tt.displayName=$o;var ot="MenuRadioGroup",[Lo,Go]=F(ot,{value:void 0,onValueChange:()=>{}}),nt=s.forwardRef((e,t)=>{const{value:o,onValueChange:n,...a}=e,c=_e(n);return r.jsx(Lo,{scope:e.__scopeMenu,value:o,onValueChange:c,children:r.jsx(be,{...a,ref:t})})});nt.displayName=ot;var rt="MenuRadioItem",at=s.forwardRef((e,t)=>{const{value:o,...n}=e,a=Go(rt,e.__scopeMenu),c=o===a.value;return r.jsx(st,{scope:e.__scopeMenu,checked:c,children:r.jsx(le,{role:"menuitemradio","aria-checked":c,...n,ref:t,"data-state":Ie(c),onSelect:h(n.onSelect,()=>a.onValueChange?.(o),{checkForDefaultPrevented:!1})})})});at.displayName=rt;var Ee="MenuItemIndicator",[st,Ko]=F(Ee,{checked:!1}),ct=s.forwardRef((e,t)=>{const{__scopeMenu:o,forceMount:n,...a}=e,c=Ko(Ee,o);return r.jsx(ie,{present:n||se(c.checked)||c.checked===!0,children:r.jsx(N.span,{...a,ref:t,"data-state":Ie(c.checked)})})});ct.displayName=Ee;var Uo="MenuSeparator",it=s.forwardRef((e,t)=>{const{__scopeMenu:o,...n}=e;return r.jsx(N.div,{role:"separator","aria-orientation":"horizontal",...n,ref:t})});it.displayName=Uo;var Bo="MenuArrow",ut=s.forwardRef((e,t)=>{const{__scopeMenu:o,...n}=e,a=ue(o);return r.jsx(Ht,{...a,...n,ref:t})});ut.displayName=Bo;var zo="MenuSub",[Tr,lt]=F(zo),H="MenuSubTrigger",dt=s.forwardRef((e,t)=>{const o=$(H,e.__scopeMenu),n=te(H,e.__scopeMenu),a=lt(H,e.__scopeMenu),c=De(H,e.__scopeMenu),i=s.useRef(null),{pointerGraceTimerRef:d,onPointerGraceIntentChange:m}=c,f={__scopeMenu:e.__scopeMenu},u=s.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return s.useEffect(()=>u,[u]),s.useEffect(()=>{const l=d.current;return()=>{window.clearTimeout(l),m(null)}},[d,m]),r.jsx(Ce,{asChild:!0,...f,children:r.jsx(et,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":a.contentId,"data-state":mt(o.open),...e,ref:Te(t,a.onTriggerChange),onClick:l=>{e.onClick?.(l),!(e.disabled||l.defaultPrevented)&&(l.currentTarget.focus(),o.open||o.onOpenChange(!0))},onPointerMove:h(e.onPointerMove,Q(l=>{c.onItemEnter(l),!l.defaultPrevented&&!e.disabled&&!o.open&&!i.current&&(c.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{o.onOpenChange(!0),u()},100))})),onPointerLeave:h(e.onPointerLeave,Q(l=>{u();const v=o.content?.getBoundingClientRect();if(v){const w=o.content?.dataset.side,p=w==="right",x=p?-5:5,M=v[p?"left":"right"],_=v[p?"right":"left"];c.onPointerGraceIntentChange({area:[{x:l.clientX+x,y:l.clientY},{x:M,y:v.top},{x:_,y:v.top},{x:_,y:v.bottom},{x:M,y:v.bottom}],side:w}),window.clearTimeout(d.current),d.current=window.setTimeout(()=>c.onPointerGraceIntentChange(null),300)}else{if(c.onTriggerLeave(l),l.defaultPrevented)return;c.onPointerGraceIntentChange(null)}})),onKeyDown:h(e.onKeyDown,l=>{const v=c.searchRef.current!=="";e.disabled||v&&l.key===" "||Do[n.dir].includes(l.key)&&(o.onOpenChange(!0),o.content?.focus(),l.preventDefault())})})})});dt.displayName=H;var ft="MenuSubContent",pt=s.forwardRef((e,t)=>{const o=Xe(b,e.__scopeMenu),{forceMount:n=o.forceMount,...a}=e,c=$(b,e.__scopeMenu),i=te(b,e.__scopeMenu),d=lt(ft,e.__scopeMenu),m=s.useRef(null),f=T(t,m);return r.jsx(X.Provider,{scope:e.__scopeMenu,children:r.jsx(ie,{present:n||c.open,children:r.jsx(X.Slot,{scope:e.__scopeMenu,children:r.jsx(Re,{id:d.contentId,"aria-labelledby":d.triggerId,...a,ref:f,align:"start",side:i.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{i.isUsingKeyboardRef.current&&m.current?.focus(),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:h(e.onFocusOutside,u=>{u.target!==d.trigger&&c.onOpenChange(!1)}),onEscapeKeyDown:h(e.onEscapeKeyDown,u=>{i.onClose(),u.preventDefault()}),onKeyDown:h(e.onKeyDown,u=>{const l=u.currentTarget.contains(u.target),v=Ro[i.dir].includes(u.key);l&&v&&(c.onOpenChange(!1),d.trigger?.focus(),u.preventDefault())})})})})})});pt.displayName=ft;function mt(e){return e?"open":"closed"}function se(e){return e==="indeterminate"}function Ie(e){return se(e)?"indeterminate":e?"checked":"unchecked"}function Vo(e){const t=document.activeElement;for(const o of e)if(o===t||(o.focus(),document.activeElement!==t))return}function Yo(e,t){return e.map((o,n)=>e[(t+n)%e.length])}function Wo(e,t,o){const a=t.length>1&&Array.from(t).every(f=>f===t[0])?t[0]:t,c=o?e.indexOf(o):-1;let i=Yo(e,Math.max(c,0));a.length===1&&(i=i.filter(f=>f!==o));const m=i.find(f=>f.toLowerCase().startsWith(a.toLowerCase()));return m!==o?m:void 0}function qo(e,t){const{x:o,y:n}=e;let a=!1;for(let c=0,i=t.length-1;c<t.length;i=c++){const d=t[c],m=t[i],f=d.x,u=d.y,l=m.x,v=m.y;u>n!=v>n&&o<(l-f)*(n-u)/(v-u)+f&&(a=!a)}return a}function Ho(e,t){if(!t)return!1;const o={x:e.clientX,y:e.clientY};return qo(o,t)}function Q(e){return t=>t.pointerType==="mouse"?e(t):void 0}var Xo=He,Qo=Ce,Zo=Qe,Jo=Ze,en=be,tn=Je,on=le,nn=tt,rn=nt,an=at,sn=ct,cn=it,un=ut,ln=dt,dn=pt,de="DropdownMenu",[fn]=ce(de,[We]),y=We(),[pn,gt]=fn(de),vt=e=>{const{__scopeDropdownMenu:t,children:o,dir:n,open:a,defaultOpen:c,onOpenChange:i,modal:d=!0}=e,m=y(t),f=s.useRef(null),[u,l]=Oe({prop:a,defaultProp:c??!1,onChange:i,caller:de});return r.jsx(pn,{scope:t,triggerId:ve(),triggerRef:f,contentId:ve(),open:u,onOpenChange:l,onOpenToggle:s.useCallback(()=>l(v=>!v),[l]),modal:d,children:r.jsx(Xo,{...m,open:u,onOpenChange:l,dir:n,modal:d,children:o})})};vt.displayName=de;var ht="DropdownMenuTrigger",xt=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:o,disabled:n=!1,...a}=e,c=gt(ht,o),i=y(o);return r.jsx(Qo,{asChild:!0,...i,children:r.jsx(N.button,{type:"button",id:c.triggerId,"aria-haspopup":"menu","aria-expanded":c.open,"aria-controls":c.open?c.contentId:void 0,"data-state":c.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...a,ref:Te(t,c.triggerRef),onPointerDown:h(e.onPointerDown,d=>{!n&&d.button===0&&d.ctrlKey===!1&&(c.onOpenToggle(),c.open||d.preventDefault())}),onKeyDown:h(e.onKeyDown,d=>{n||(["Enter"," "].includes(d.key)&&c.onOpenToggle(),d.key==="ArrowDown"&&c.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(d.key)&&d.preventDefault())})})})});xt.displayName=ht;var mn="DropdownMenuPortal",wt=e=>{const{__scopeDropdownMenu:t,...o}=e,n=y(t);return r.jsx(Zo,{...n,...o})};wt.displayName=mn;var Mt="DropdownMenuContent",_t=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:o,...n}=e,a=gt(Mt,o),c=y(o),i=s.useRef(!1);return r.jsx(Jo,{id:a.contentId,"aria-labelledby":a.triggerId,...c,...n,ref:t,onCloseAutoFocus:h(e.onCloseAutoFocus,d=>{i.current||a.triggerRef.current?.focus(),i.current=!1,d.preventDefault()}),onInteractOutside:h(e.onInteractOutside,d=>{const m=d.detail.originalEvent,f=m.button===0&&m.ctrlKey===!0,u=m.button===2||f;(!a.modal||u)&&(i.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});_t.displayName=Mt;var gn="DropdownMenuGroup",vn=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:o,...n}=e,a=y(o);return r.jsx(en,{...a,...n,ref:t})});vn.displayName=gn;var hn="DropdownMenuLabel",xn=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:o,...n}=e,a=y(o);return r.jsx(tn,{...a,...n,ref:t})});xn.displayName=hn;var wn="DropdownMenuItem",Ct=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:o,...n}=e,a=y(o);return r.jsx(on,{...a,...n,ref:t})});Ct.displayName=wn;var Mn="DropdownMenuCheckboxItem",_n=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:o,...n}=e,a=y(o);return r.jsx(nn,{...a,...n,ref:t})});_n.displayName=Mn;var Cn="DropdownMenuRadioGroup",yn=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:o,...n}=e,a=y(o);return r.jsx(rn,{...a,...n,ref:t})});yn.displayName=Cn;var Dn="DropdownMenuRadioItem",Rn=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:o,...n}=e,a=y(o);return r.jsx(an,{...a,...n,ref:t})});Rn.displayName=Dn;var bn="DropdownMenuItemIndicator",En=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:o,...n}=e,a=y(o);return r.jsx(sn,{...a,...n,ref:t})});En.displayName=bn;var In="DropdownMenuSeparator",An=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:o,...n}=e,a=y(o);return r.jsx(cn,{...a,...n,ref:t})});An.displayName=In;var Sn="DropdownMenuArrow",Pn=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:o,...n}=e,a=y(o);return r.jsx(un,{...a,...n,ref:t})});Pn.displayName=Sn;var Tn="DropdownMenuSubTrigger",Nn=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:o,...n}=e,a=y(o);return r.jsx(ln,{...a,...n,ref:t})});Nn.displayName=Tn;var jn="DropdownMenuSubContent",kn=s.forwardRef((e,t)=>{const{__scopeDropdownMenu:o,...n}=e,a=y(o);return r.jsx(dn,{...a,...n,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});kn.displayName=jn;var On=vt,Fn=xt,$n=wt,Ln=_t,Gn=Ct;function Nr({...e}){return r.jsx(On,{"data-slot":"dropdown-menu",...e})}function jr({...e}){return r.jsx(Fn,{"data-slot":"dropdown-menu-trigger",...e})}function kr({className:e,sideOffset:t=4,...o}){return r.jsx($n,{children:r.jsx(Ln,{"data-slot":"dropdown-menu-content",sideOffset:t,className:I("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",e),...o})})}function Or({className:e,inset:t,variant:o="default",...n}){return r.jsx(Gn,{"data-slot":"dropdown-menu-item","data-inset":t,"data-variant":o,className:I("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...n})}var yt="AlertDialog",[Kn]=ce(yt,[Le]),S=Le(),Dt=e=>{const{__scopeAlertDialog:t,...o}=e,n=S(t);return r.jsx(Xt,{...n,...o,modal:!0})};Dt.displayName=yt;var Un="AlertDialogTrigger",Bn=s.forwardRef((e,t)=>{const{__scopeAlertDialog:o,...n}=e,a=S(o);return r.jsx(no,{...a,...n,ref:t})});Bn.displayName=Un;var zn="AlertDialogPortal",Rt=e=>{const{__scopeAlertDialog:t,...o}=e,n=S(t);return r.jsx(to,{...n,...o})};Rt.displayName=zn;var Vn="AlertDialogOverlay",bt=s.forwardRef((e,t)=>{const{__scopeAlertDialog:o,...n}=e,a=S(o);return r.jsx(oo,{...a,...n,ref:t})});bt.displayName=Vn;var U="AlertDialogContent",[Yn,Wn]=Kn(U),qn=Lt("AlertDialogContent"),Et=s.forwardRef((e,t)=>{const{__scopeAlertDialog:o,children:n,...a}=e,c=S(o),i=s.useRef(null),d=T(t,i),m=s.useRef(null);return r.jsx(Qt,{contentName:U,titleName:It,docsSlug:"alert-dialog",children:r.jsx(Yn,{scope:o,cancelRef:m,children:r.jsxs(Zt,{role:"alertdialog",...c,...a,ref:d,onOpenAutoFocus:h(a.onOpenAutoFocus,f=>{f.preventDefault(),m.current?.focus({preventScroll:!0})}),onPointerDownOutside:f=>f.preventDefault(),onInteractOutside:f=>f.preventDefault(),children:[r.jsx(qn,{children:n}),r.jsx(Xn,{contentRef:i})]})})})});Et.displayName=U;var It="AlertDialogTitle",At=s.forwardRef((e,t)=>{const{__scopeAlertDialog:o,...n}=e,a=S(o);return r.jsx(Jt,{...a,...n,ref:t})});At.displayName=It;var St="AlertDialogDescription",Pt=s.forwardRef((e,t)=>{const{__scopeAlertDialog:o,...n}=e,a=S(o);return r.jsx(eo,{...a,...n,ref:t})});Pt.displayName=St;var Hn="AlertDialogAction",Tt=s.forwardRef((e,t)=>{const{__scopeAlertDialog:o,...n}=e,a=S(o);return r.jsx($e,{...a,...n,ref:t})});Tt.displayName=Hn;var Nt="AlertDialogCancel",jt=s.forwardRef((e,t)=>{const{__scopeAlertDialog:o,...n}=e,{cancelRef:a}=Wn(Nt,o),c=S(o),i=T(t,a);return r.jsx($e,{...c,...n,ref:i})});jt.displayName=Nt;var Xn=({contentRef:e})=>{const t=`\`${U}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${U}\` by passing a \`${St}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${U}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return s.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},Qn=Dt,Zn=Rt,Jn=bt,er=Et,tr=Tt,or=jt,nr=At,rr=Pt;function ar({...e}){return r.jsx(Qn,{"data-slot":"alert-dialog",...e})}function sr({...e}){return r.jsx(Zn,{"data-slot":"alert-dialog-portal",...e})}function cr({className:e,...t}){return r.jsx(Jn,{"data-slot":"alert-dialog-overlay",className:I("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function ir({className:e,...t}){return r.jsxs(sr,{children:[r.jsx(cr,{}),r.jsx(er,{"data-slot":"alert-dialog-content",className:I("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...t})]})}function ur({className:e,...t}){return r.jsx("div",{"data-slot":"alert-dialog-header",className:I("flex flex-col gap-2 text-center sm:text-left",e),...t})}function lr({className:e,...t}){return r.jsx("div",{"data-slot":"alert-dialog-footer",className:I("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})}function dr({className:e,...t}){return r.jsx(nr,{"data-slot":"alert-dialog-title",className:I("text-lg font-semibold",e),...t})}function fr({className:e,...t}){return r.jsx(rr,{"data-slot":"alert-dialog-description",className:I("text-muted-foreground text-sm",e),...t})}function pr({className:e,...t}){return r.jsx(tr,{"data-slot":"alert-dialog-action",className:I(Ne(),e),...t})}function mr({className:e,...t}){return r.jsx(or,{"data-slot":"alert-dialog-cancel",className:I(Ne({variant:"outline"}),e),...t})}function Fr({open:e,onOpenChange:t,item:o,items:n,onConfirm:a,isDeleting:c}){const i=n&&n.length>0,d=i?n.length:1,m=o?.title??"",f=o?.childCount??0,u=i?n.reduce((w,p)=>w+(p.childCount??0),0):f,l=()=>i?`Delete ${d} items?`:`Delete "${m}"?`,v=()=>{const w=[];return i?w.push(`You are about to delete ${d} items.`):w.push(`You are about to delete "${m}".`),u>0&&w.push(`This will also delete ${u} child item${u===1?"":"s"}.`),w.push("You can undo this action for a short time after deletion."),w.join(" ")};return r.jsx(ar,{open:e,onOpenChange:t,children:r.jsxs(ir,{children:[r.jsxs(ur,{children:[r.jsx(dr,{children:l()}),r.jsx(fr,{children:v()})]}),r.jsxs(lr,{children:[r.jsx(mr,{disabled:c,children:"Cancel"}),r.jsx(pr,{onClick:a,disabled:c,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:c?"Deleting...":"Delete"})]})]})})}const gr=5e3;function $r({visible:e,itemTitle:t,itemCount:o,onUndo:n,onDismiss:a,timeout:c=gr}){if(s.useEffect(()=>{if(!e)return;const d=setTimeout(()=>{a()},c);return()=>clearTimeout(d)},[e,c,a]),!e)return null;const i=()=>o&&o>1?`Deleted ${o} items`:`Deleted "${t}"`;return r.jsxs("div",{role:"alert",className:"fixed bottom-4 left-1/2 -translate-x-1/2 z-50 flex items-center gap-3 rounded-lg border bg-background px-4 py-3 shadow-lg",children:[r.jsx("span",{className:"text-sm",children:i()}),r.jsx(Ot,{variant:"outline",size:"sm",onClick:n,children:"Undo"})]})}function Lr(e={}){const{onDeleted:t,onRestored:o,onError:n}=e,[a,c]=s.useState(!1),[i,d]=s.useState(null),m=s.useRef([]),f=s.useCallback(async p=>{try{if(!(await fetch(`/api/work-items/${p}/restore`,{method:"POST"})).ok)throw new Error("Failed to restore item");d(null),m.current=[],o?.()}catch(x){n?.(x instanceof Error?x:new Error("Unknown error"))}},[o,n]),u=s.useCallback(async()=>{const p=m.current;for(const x of p)await f(x)},[f]),l=s.useCallback(async p=>{c(!0);try{if(!(await fetch(`/api/work-items/${p.id}`,{method:"DELETE"})).ok)throw new Error("Failed to delete item");m.current=[p.id],d({itemId:p.id,itemTitle:p.title,onUndo:u}),t?.()}catch(x){n?.(x instanceof Error?x:new Error("Unknown error"))}finally{c(!1)}},[t,n,u]),v=s.useCallback(async p=>{c(!0);try{await Promise.all(p.map(x=>fetch(`/api/work-items/${x.id}`,{method:"DELETE"}))),m.current=p.map(x=>x.id),d({itemId:p[0].id,itemTitle:p[0].title,itemCount:p.length,onUndo:u}),t?.()}catch(x){n?.(x instanceof Error?x:new Error("Unknown error"))}finally{c(!1)}},[t,n,u]),w=s.useCallback(()=>{d(null),m.current=[]},[]);return{deleteItem:l,deleteItems:v,restoreItem:f,isDeleting:a,undoState:i,dismissUndo:w}}export{Nr as D,Dr as G,_o as I,Rr as L,br as P,Mo as R,Ir as T,$r as U,jr as a,kr as b,Or as c,Er as d,Pr as e,Lr as f,Fr as g,Ke as h,Sr as i,Ar as u,P as w};
//# sourceMappingURL=use-work-item-delete-D939N_lH.js.map
